# 3장. 시스템 설계 면접 공략법


시스템 설계 면접은  “두 명의 동료(면접관과 나)”가 모호한 문제를 풀기위해 협력하여, 해결책을 찾아내는 과정에 대한 시뮬레이션이다 .

⇒ 정해진 결말 , 정답 X 
  
### 면접관이 내게서 찾고자하는 것은 무엇일까?
    
  - 압박이 심한 상황에서도 잘 헤쳐 나갈 자질이 있는지? 
    
  - 모호한 문제를 건설적으로 해결할 능력이 있는지 ?
    
  - 설계의 순수성(purity)에 집착한 나머지 타협적 결정(tradeoff)을 도외시하고 오버엔지니어링을 하는지?  
        [tradeoff 관련 회고](./tradeoff-retrospective.md)

## 설계 면접 4단계, 접근법

### 1단계. 문제 이해 및 설계 범위 확정
    
  정답 따위는 없음, 생각을 깊게하고 속도를 늦춰라,
    
  질문해라, 요구사항과 가정들을 분명히 해라, 
    
  ### “엔지니어 가져야 할 가장 중요한 기술 : _올바른 질문을 하는 것, 적절한 가정을 하는 것,시스템 구축에 필요한 정보를 모으는 것_”
    
  > 이제까지 서비스를 만들며, 그리고 실무에서 느꼈던 나의 생각을 관통하는 문장이다..
  
  <details>
  <summary> 올바른 질문 </summary>
    “정답 찾기” < “문제를 제대로 정의하는 것”  
      
  비즈니스/도메인 질문    
    
      - “지금 사용자가 겪는 진짜 불편이 무엇인가?”
      - “이 기능이 실패하면, 비즈니스 입장에서 가장 치명적인 건 무엇인가?”
        
  요구사항/제약에 대한 질문
        
      - “필수 조건과 선택 조건은 무엇인가?”
      - “지금 이 요구사항은 ‘당장 필요한 것’인지, ‘미래를 대비한 것’인지?”
        
  운영 관점 질문
        
      - “이 시스템이 장애 나면, 누가, 어떤 절차로, 얼마나 빨리 알아야 하나?”
      - “측정하지 않으면 안 되는 핵심 지표는 무엇인가?”
        
  좋은 질문은 **불필요한 구현을 줄이고**, **중요한 부분에 집중하게** 만들어 준다. 올바른 질문을 통해 ‘올바른 방향’을 결정하자.

  </details>
  <details>
  <summary> 적절한 가정 </summary>
             
  현실에서는 항상 정보가 불완전한 상태에서 설계·구현해야 한다.
  
  이때 “좋은 가정”과 “나쁜(위험한) 가정”을 구분하는 게 중요하다.

  좋은 가정 
        
      - 현재까지 확보된 정보에 비춰볼 때 합리적 
      - 명시적으로 문서화됨 
      - 틀리더라도 나중에는 수정 가능한 수준으로 시스템을 설계 
        
  나쁜(위험한) 가정 
        
      - “설마 그렇게까지 되겠어?”
      - 말로만 공유되고, 문서/코드 에 드러나지않는 암묵적인 가정 
      - 한번 박히면 변경 비용이 폭발하는 위치(식별자, 스키마, 프로토콜등)에 박힌 가정 
        
  > 여담이지만, 나쁜(위험한)가정은 진짜 ㄹㅇ 위험하다. 몸소 느꼈기 때문이다. 
  > 저렇게 되면 엄청난 기술부채가 생길 수 밖에 없다. 
  > 언제나, 위험한 가정은 경계하고 또 경계하자..
         
  결국 “가정 자체” 보다도, 가정을 의식적으로 관리하는 습관이 엔지니어의 실력을 많이 갈라놓고 한다.
  
  </details>
  <details>
  <summary> 시스템에 필요한 정보 수집 </summary>

  좋은 시스템은 감이 아니라 정보에 기반한 의사 결정에서 나온다.
        
  도메인 정보
  
    실제 운영하는 사람 / 사용자와의 인터뷰
    기존 프로세스(엑셀, 메신저, 수기 업무) 파악
        
  기술적 정보 
        
    비슷한 문제를 해결한 레퍼런스 아키텍처, RFC, 공식 문서
    예상 트래픽, 데이터 증가량, 장애 패턴
        
        
  운영 정보 
        
    현재 장애 이력, 문의 유형, 성능/비용 현황
    조직 구조, 배포/릴리즈 프로세스, 인력 역량
        
        
  의사결정에 직접 영향을 주는 정보를 정확히 골라서 모았는가? 
    
  </details>
    
  요구사항을 깊게 이해하려 노력하고, 모호함을 없애는 것이 가장 중요한 지점이다.

  ---
  
### 2단계. 개략적인 설계안 제시 및 동의 구하기
    
  앞서 다뤘듯,  “두 명의 동료(면접관과 나)”가 모호한 문제를 풀기위해 협력해야한다. 
  
  그렇기에 동료에게 동의를 얻으며 진행하자.
  
  > 이건 면접이 아니라, 협업을 할 때에도,,
    
    핵심 컴포넌트들{클라이언트(모바일/웹), API, 웹서버, 데이터 저장소, 캐시, CDN, 메시지 큐}로 구성된 다이어그램을 그리자. 
    
    ch2 에서 다뤘던 개략적인 계산을 통해, 제약사항들을 위반하지 않는지 살펴보자.
    
    시스템 의 usecase 도 몇 가지 살펴 보자 
    
  동의를 얻으며 진행하자.
  
  ---
      
### 3단계. 상세 설계
    
  상세 설계시 컴포넌트사이의 우선순위를 정해야한다. 
    
    대부분의 경우 면접관이 중요시 여기는 특정컴포넌트에 대한 세부사항을 깊이있게 설명하길 원할 것이다. 
      
    가령 단축 URL 생성기 같은 경우 면접관은 해시함수의 설계를 여쭤볼 수 있다. 
      
    실시간 성이 중요한 어떤 서비스라면 latency에 방점을 찍어 질문할 수있다. 
    
  즉 , 무엇이 중요한지 판단한 후, 동의를 구하고, 이에 대해 설명하자 .
    

### 4단계. 마무리
    
    이렇게 상세 설계 단계까지 완료하면, 
    
    팔로업 질문이 들어올 수 있다. 
    
    특정 주문이 들어올 수 있고, 내가 제시해야할 수 도 있다.
    
    개선할 점은 언제나 있기 마련이기에, 침착하게 조금의 개선포인트라도 제시하자. 
    
    팔로업 질문이 없다면, 설계를 다시한번 요약하는 것도 좋은 선택일것이고, 
    
    여러 해결책을 제시하는 것도 굉장히 중요하다. 
    
    좋은(건강한) 가정을 전제로, 현재 설계된 시스템의 미래를 논해도 좋다.
    

---

**해야할 것** 

- 질문을 통해 명확히 해라. (스스로 내린 가정이 옳다고 여기 X)
- 문제의 요구사항을 이해해라
- 정답이나 최선의 답안 같은 것은 없다는 점을 명시해라.
- 면접관과 소통하여, 면접관이 사고 흐름을 이해할 수 있도록해라.
- 가능하다면, 여러 해법을 함께 제시해라.
- 각 컴포넌트의 세부 설명은 동의 후 진행하고, 중요한 것 먼저해라.

**하지 말아야 할 것**

- 전형적인 면접 문제들에도 대비하지 않은 상태에서 면접장에 가지 말라.
- 요구사항이나 가정들을 분명히 하지 않은 상태에서 설계를 제시하지 말라.
- 처음부터 특정 컴포넌트의 세부사항을 너무 깊이 설명하지 말라. 개략적 설 계를 마친 뒤에 세부사항으로 나아가라.
- 진행 중에 막혔다면, 힌트를 청하기를 주저하지 말라.
- 다시 말하지만, 소통을 주저하지 말라. 침묵 속에 설계를 진행하지 말라.
- 설계안을 내놓는 순간 면접이 끝난다고 생각하지 말라. 면접관이 끝났다고 말하기 전까지는 끝난 것이 아니다. 의견을 일찍, 그리고 자주 구하라.

**시간 배분**

시스템 설계 면접은 보통 매우 광범위한 영역을 다루며 45분 혹은 한 시간은 충분하지 않을 수 있다. 따라서 시간 관리를 잘 하는 것이 중요하다. 그렇다면, 상술한 각 단계에 어느 정도의 시간을 배분하는 것이 좋을까? 45분의 시간이 주어진다고 가정하고, 각 단계에 어느 정도 시간을 쓰는 것이 좋을지 아래에 대략적으로 정리했다. 대략적 추정치일 뿐이라는 점을 명심하자. 실제로 써야 하는 시간은 문제의 범위나 면접관의 요구사항에 따라 달라질 수 있다.

1단계 - 문제 이해 및 설계 범위 확정: 3분에서 10분

2단계 - 개략적 설계안 제시 및 동의 구하기: 10분에서 15분

3단계 - 상세 설계: 10분에서 25분

4단계 - 마무리: 3분에서 5분
